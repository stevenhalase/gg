function adFactory(e){function r(){return e.get("/api/ads/video-cards")}return{getVideoCards:r}}function adminController(e,r){var t=this;t.matches=[],t.words=["one","two","three","four","five"],t.activeUsers=[],t.openModal=function(e){$("#"+e).openModal()},t.closeModal=function(e){$("#"+e).closeModal()},t.saveMatch=function(){t.match._id?r.put("/api/v1/csgo-matches/"+t.match._id,t.match).then(function(e){console.log("Match Save API response: ",e)}):r.post("/api/v1/csgo-matches/",t.match).then(function(e){console.log("Match Save API response: ",e)}),r.get("/api/v1/csgo-matches/").then(function(e){console.log("Internal API response: ",e),t.matches=e.data})},t.removeMatch=function(e){r["delete"]("/api/v1/csgo-matches/"+e).then(function(e){console.log("Match Save API response: ",e)}),r.get("/api/v1/csgo-matches/").then(function(e){console.log("Internal API response: ",e),t.matches=e.data})},t.editMatch=function(e){t.match=e},r.get("/api/v1/csgo-matches/").then(function(e){console.log("Internal API response: ",e),t.matches=e.data}),t.clearForNew=function(){t.match={matchUrl:"",teams:[{teamName:"",teamUrl:"",teamLogoUrl:"",players:[{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""},{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""},{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""},{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""},{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""}]},{teamName:"",teamUrl:"",teamLogoUrl:"",players:[{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""},{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""},{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""},{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""},{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""}]}]}},t.match={matchUrl:"",teams:[{teamName:"",teamUrl:"",teamLogoUrl:"",players:[{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""},{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""},{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""},{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""},{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""}]},{teamName:"",teamUrl:"",teamLogoUrl:"",players:[{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""},{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""},{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""},{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""},{playerName:"",playerUrl:"",playerImg:"",playerID:"",rating:"",deathsPerRound:"",killsPerRound:"",headshots:""}]}]}}function channelController(e,r,t,a,n){var o=this;o.channel=n.getObject("currentChannel"),o.channelUrl=r.trustAsResourceUrl("https://player.twitch.tv/?channel="+o.channel.name),o.chatUrl=r.trustAsResourceUrl("https://www.twitch.tv/"+o.channel.name+"/chat/")}function dashboardController(e,r,t,a){var n=this;n.currentUser=t.currentUser,n.changeChannel=function(r){a.putObject("currentChannel",r),e.go("channel")},n.goToGame=function(r){a.putObject("currentGame",r),e.go("game")},n.removeStream=function(e){var t=n.currentUser.recentChannels.indexOf(e);n.currentUser.recentChannels.splice(t,1),r.post("/api/me",n.currentUser).then(function(e){console.log("SAVED DUDE: ",e)})},n.clearStreams=function(){n.currentUser.recentChannels=[],r.post("/api/me",n.currentUser).then(function(e){console.log("SAVED DUDE: ",e)})},n.searchFavoriteGame=function(){console.log(n.favoriteGameSearchField),r.get("https://api.twitch.tv/kraken/search/games?q="+n.favoriteGameSearchField+"&type=suggest").then(function(e){e.data.games.length>0?(n.favoriteGameSearchField="",Materialize.toast("Game added!",3e3),n.currentUser.favoriteGames.push(e.data.games[0]),console.log(n.currentUser.favoriteGames[0]),r.post("/api/me",n.currentUser).then(function(e){console.log("SAVED DUDE: ",e)})):Materialize.toast("Game not found!",3e3)})},n.removeGame=function(e){var t=n.currentUser.favoriteGames.indexOf(e);n.currentUser.favoriteGames.splice(t,1),r.post("/api/me",n.currentUser).then(function(e){console.log("SAVED DUDE: ",e)})},n.searchForFriends=function(){console.log(n.friendSearchField),console.log("current user: ",n.currentUser),r.post("/api/users",{query:n.friendSearchField}).then(function(e){console.log(e),n.currentUser.friends.push(e.data[0]),r.post("/api/me",n.currentUser).then(function(e){console.log("SAVED DUDE: ",e)})})},n.openFriendModal=function(e){console.log("#"+e),$("#"+e).openModal()}}function gameController(e,r,t,a,n){var o=this;o.currentGame=n.getObject("currentGame"),console.log("current game: ",o.currentGame),o.currentUser=t.currentUser,o.favoriteGames=[],o.currentGameData={},o.currentGameAppId="",o.adItems=[],r.get("https://api.twitch.tv/kraken/streams/?game="+o.currentGame.name+"&stream_type=live&limit=4").then(function(e){o.currentGame.streams=e.data.streams}),o.changeChannel=function(a,o){void 0!==t.currentUser.recentChannels&&(t.currentUser.recentChannels.push(a),r.post("/api/me",t.currentUser).then(function(e){console.log("SAVED DUDE: ",e)})),n.putObject("currentChannel",a),e.go("channel"),$("#"+o).closeModal()},o.getStreamLink=function(e){return"https://player.twitch.tv/?channel="+e},o.fixLogoUrl=function(e){return e=e.split("logoart"),e=e[0]+"boxart"+e[1],e=e.split("240"),e=e[0]+"800"+e[1],e=e.split("144"),e=e[0]+"800"+e[1]},o.fixGiantBombUrl=function(e){return e=e.split("//")[1],e="http://"+e};o.currentGame.name.split(" ").join("");r({method:"JSONP",url:"https://www.giantbomb.com/api/game/"+o.currentGame.giantbomb_id+"/?api_key=c63b181fdfa9d0b843f4d59835027bfbe3616c85&format=json",params:{format:"jsonp",json_callback:"JSON_CALLBACK"}}).then(function(e){o.currentGameData=e.data.results;var r=o.currentGameData.name.split(" ").join("-");r.includes(":")&&(r=r.split(":").join("")),o.getNews(r),parsedImageUrl=o.fixGiantBombUrl(o.currentGameData.image.super_url),$(".game-wrapper").css({"background-image":"url("+parsedImageUrl+")"})}),o.getNews=function(e){r.get("/api/news/game/"+e).then(function(e){console.log("news response: ",e),o.news=e.data})}}function homeController(e,r){}function indexController(e,r,t,a,n){var o=this;$(document).ready(function(){$(".button-collapse").sideNav({menuWidth:300,closeOnClick:!0})}),o.openNav=function(){$(".button-collapse").sideNav("show")},o.closeOverlay=function(){$("div[id^=sidenav-overlay]").remove(),o.loggedIn===!1?o.showLogin===!0&&(o.showLogin=!1):o.loggedIn===!0&&o.showUserMenu===!0&&(o.showUserMenu=!1)},o.showLogin=!1,o.showUserMenu=!1,o.loggedInUser={},o.loggedIn=!1,e.$on("$locationChangeSuccess",function(){e.location=r.path().replace("/","")}),n.getUser().then(function(e){o.loggedInUser=e.data,n.currentUser=o.loggedInUser,o.loggedInUser._id&&(o.loggedIn=!0)})}function matchesController(e,r,t){var a=this;a.title="Home Controller",a.matches=[],$(document).ready(function(){$(".tooltipped").tooltip({delay:50})}),a.posOrNeg=function(e,r){return e>r},a.parseImageUrl=function(e){return r.trustAsResourceUrl(e)},a.openModal=function(e){console.log("opening modal"),$("#"+e).openModal()},a.closeModal=function(e){$("#"+e).closeModal()},a.getAvg=function(e,r){for(var t=5,a=0;a<e.players.length;a++)0===e.players[a].rating.length&&t--;if("rating"===r){for(var n=0,a=0;a<e.players.length;a++)0!==e.players[a].rating.length&&(n+=parseFloat(e.players[a].rating));return e.rating=n/t,n/t}if("killsPerRound"===r){for(var o=0,a=0;a<e.players.length;a++)0!==e.players[a].killsPerRound.length&&(o+=parseFloat(e.players[a].killsPerRound));return e.killsPerRound=o/t,o/t}if("deathsPerRound"===r){for(var l=0,a=0;a<e.players.length;a++)0!==e.players[a].deathsPerRound.length&&(l+=parseFloat(e.players[a].deathsPerRound));return e.deathsPerRound=l/t,l/t}if("headshots"===r){for(var s=0,a=0;a<e.players.length;a++)0!==e.players[a].headshots.length&&(s+=parseFloat(e.players[a].headshots));return e.headshots=s/t,s/t}if("roundsContributed"===r){for(var c=0,a=0;a<e.players.length;a++)0!==e.players[a].roundsContributed.length&&(c+=parseFloat(e.players[a].roundsContributed));return c/t}},a.getBg=function(e,r,t){return"rating"===t?e.rating===r.rating?"tied":e.rating>r.rating?"higher":"lower":"killsPerRound"===t?e.killsPerRound===r.killsPerRound?"tied":e.killsPerRound>r.killsPerRound?"higher":"lower":"deathsPerRound"===t?e.deathsPerRound===r.deathsPerRound?"tied":e.deathsPerRound>r.deathsPerRound?"higher":"lower":"headshots"===t?e.headshots===r.headshots?"tied":e.headshots>r.headshots?"higher":"lower":void 0},a.goCray=function(){var e=Math.floor(500*Math.random())+"px",r="rotate("+Math.floor(360*Math.random())+"deg)";console.log(e),$("#broke-img").css({width:e,transform:r}),$("main").css({"background-image":"url('../images/flames.jpg')","background-size":"cover","background-position":"center"}),$("#updating").text("OH DAYUM!"),$("#updating").css({"font-weight":"bolder",color:"white"})},a.nah=function(){$("#broke-img").css({width:"200px",transform:"none"}),$("main").css({"background-image":"none","background-size":"cover","background-position":"center"}),$("#updating").text("We're updating matches, relax."),$("#updating").css({"font-weight":"normal",color:"black"})},e.get("/api/v1/csgo-matches/").then(function(e){console.log("Internal API response: ",e),a.matches=e.data}),setTimeout(function(){},2e3)}function newProfileController(e,r,t){var a=this;r.get("/api/me").then(function(e){a.currentUser=e.data}),console.log(a.currentUser),a.searchFavoriteGame=function(){console.log(a.favoriteGameSearchField),r.get("https://api.twitch.tv/kraken/search/games?q="+a.favoriteGameSearchField+"&type=suggest").then(function(e){e.data.games.length>0?(a.favoriteGameSearchField="",Materialize.toast("Game added!",3e3),a.currentUser.favoriteGames.push(e.data.games[0]),console.log(a.currentUser.favoriteGames[0]),r.post("/api/me",a.currentUser).then(function(e){console.log("SAVED DUDE: ",e)})):Materialize.toast("Game not found!",3e3)})},a.removeGame=function(e){var t=a.currentUser.favoriteGames.indexOf(e);a.currentUser.favoriteGames.splice(t,1),r.post("/api/me",a.currentUser).then(function(e){console.log("SAVED DUDE: ",e)})},a.saveProfile=function(){void 0===a.currentUser.imageUrl&&(a.currentUser.imageUrl="./images/defaultavatar.png"),r.post("/api/me",a.currentUser).then(function(r){console.log("SAVED DUDE: ",r),e.go("dashboard")})}}function newsController(e){var r=this;r.title="News Controller",r.pcNews=[],r.ps4News=[],r.xboxOneNews=[],e.get("/api/news/game/pc").then(function(e){console.log("news response: ",e),r.pcNews=e.data}),e.get("/api/news/game/ps4").then(function(e){console.log("news response: ",e),r.ps4News=e.data}),e.get("/api/news/game/xbox-one").then(function(e){console.log("news response: ",e),r.xboxOneNews=e.data}),$(document).ready(function(){$("select").material_select()}),$(document).ready(function(){$(".collapsible").collapsible({accordion:!1})})}function statisticsController(){var e=this;e.title="News Controller",$(".button-collapse").sideNav()}function streamFactory(e){return currentChannel=null,{currentChannel:currentChannel}}function streamsController(e,r,t,a,n){var o=this;o.title="Home Controller",$(".button-collapse").sideNav(),$(document).ready(function(){$(".slider").slider({full_width:!0})}),o.openModal=function(e){$("#"+e).openModal()},o.closeModal=function(e){$("#"+e).closeModal()},o.goToGame=function(e){n.putObject("currentGame",e),r.go("game")},o.games=[],e.get("https://api.twitch.tv/kraken/games/top").then(function(e){o.games=e.data.top}),o.fixLogoUrl=function(e){return e=e.split("logoart"),e=e[0]+"boxart"+e[1],e=e.split("240"),e=e[0]+"800"+e[1],e=e.split("144"),e=e[0]+"800"+e[1]},o.searchGame=function(){console.log(o.gameSearchField),e.get("https://api.twitch.tv/kraken/search/games?q="+o.gameSearchField+"&type=suggest").then(function(e){console.log(e),e.data.games.length>0&&o.goToGame(e.data.games[0]),console.log("couldnt find anything")})}}function userFactory(e){function r(){return e.get("/api/me/")}var t={};return{getUser:r,currentUser:t}}angular.module("ggApp").factory("adFactory",adFactory),adFactory.$inject=["$http"],angular.module("ggApp").controller("adminCtrl",adminController),adminController.$inject=["$state","$http"],angular.module("ggApp").controller("channelCtrl",channelController),channelController.$inject=["$stateParams","$sce","StreamFactory","$state","$cookies"],angular.module("ggApp").controller("dashboardCtrl",dashboardController),dashboardController.$inject=["$state","$http","userFactory","$cookies"],angular.module("ggApp").controller("gameCtrl",gameController),gameController.$inject=["$state","$http","userFactory","adFactory","$cookies"],angular.module("ggApp").controller("homeCtrl",homeController),homeController.$inject=["$state","$http"],angular.module("ggApp").controller("indexCtrl",indexController),indexController.$inject=["$scope","$location","$http","$state","userFactory"],angular.module("ggApp").controller("matchesCtrl",matchesController),matchesController.$inject=["$http","$sce","$scope"],angular.module("ggApp").controller("newProfileCtrl",newProfileController),newProfileController.$inject=["$state","$http","userFactory"],angular.module("ggApp").controller("newsCtrl",newsController),newsController.$inject=["$http"],angular.module("ggApp").controller("statisticsCtrl",statisticsController),statisticsController.$inject=[],angular.module("ggApp").factory("StreamFactory",streamFactory),streamFactory.$inject=["$http"],angular.module("ggApp").controller("streamsCtrl",streamsController),streamsController.$inject=["$http","$state","StreamFactory","userFactory","$cookies"],angular.module("ggApp").factory("userFactory",userFactory),userFactory.$inject=["$http"];